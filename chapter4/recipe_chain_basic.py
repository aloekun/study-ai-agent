from langchain_core.prompt_values import ChatPromptTemplate
from langchain_openai import ChatOpenAI

# Chain を使った基本例、出力は標準の書き方
prompt = ChatPromptTemplate.from_messages(
    [
        ("system", "ユーザーが入力した料理のレシピを考えてください"),
        ("human", "{dish}"),
    ]
)

model = ChatOpenAI(model_name="gpt-4o-mini", temperature=0)

chain = prompt | model

ai_message = chain.invoke({"dish": "パンナコッタ"})
print(ai_message.content)

# 出力例
# パンナコッタは、イタリアのデザートで、クリーミーで滑らかな食感が特徴です。以下に基本的なパンナコッタのレシピを紹介します。

# ### 材料（4人分）
# - 生クリーム：400ml
# - 牛乳：100ml
# - 砂糖：80g
# - バニラビーンズ：1本（またはバニラエッセンス小さじ1）
# - ゼラチン：5g
# - 水：大さじ2（ゼラチン用）

# ### 作り方
# 1. **ゼラチンの準備**：
#    - ゼラチンを水に振り入れ、5分ほどふやかしておきます。

# 2. **クリームの加熱**：
#    - 鍋に生クリーム、牛乳、砂糖を入れ、中火で温めます。砂糖が完全に溶けるまで混ぜ続けます。
#    - バニラビーンズを使う場合は、縦に切って中の種を鍋に加え、さやも一緒に入れます。バニラエッセンスを使う場合は、後で加えます。

# 3. **ゼラチンの溶解**：
#    - クリームが温かくなったら、火を止め、ふやかしたゼラチンを加え、よく混ぜて溶かします。
#    - バニラエッセンスを使う場合は、このタイミングで加えます。

# 4. **型に流し込む**：
#    - 混ぜたクリームをこし器を使って型に流し込みます。型はプリン型やグラスなど、お好みのものを使用してください。

# 5. **冷やす**：
#    - 型に流し込んだら、冷蔵庫で約4時間以上冷やし固めます。

# 6. **盛り付け**：
#    - 固まったら、型から外して皿に盛り付けます。フルーツソースやキャラメルソース、ベリーなどをトッピングすると、さらに美味しくなります。

# ### おすすめのトッピング
# - ベリーソース（ラズベリーやブルーベリー）
# - キャラメルソース
# - フレッシュフルーツ（イチゴやキウイ）
# - ミントの葉

# このパンナコッタは、シンプルでありながら、特別なデザートとして楽しむことができます。ぜひお試しください！
